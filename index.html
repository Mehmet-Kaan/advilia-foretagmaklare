<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Font Awesome 6 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Montserrat:wght@600;700;800&family=Raleway:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="navbar.css" />
    <link rel="stylesheet" href="home.css" />
    <link rel="stylesheet" href="services.css" />
    <link rel="stylesheet" href="buysell.css" />
    <link rel="stylesheet" href="why.css" />
    <link rel="stylesheet" href="contact.css" />
    <link rel="stylesheet" href="footer.css" />
    <link rel="icon" href="./Assets/logo.png" />
    <title>Advilia F√∂retagsm√§klare</title>
  </head>
  <body>
    <nav>
      <div class="nav-container">
        <a href="#hem" class="nav-title">
          <img id="logo" src="./Assets/logo.png" />Advilia F√∂retagsm√§klare</a
        >
        <div class="nav-links" id="navLinks">
          <a href="#hem" class="active">Hem</a>
          <a href="#tjanster-wave">Tj√§nster</a>
          <a href="#franchise-wave">K√∂pa / S√§lja</a>
          <a href="#varfor">Varf√∂r oss</a>
          <a href="#contact">Kontakt</a>
        </div>
        <div class="burger" id="burger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>
    <div class="nav-links-mobile" id="navLinksMobile">
      <div class="nav-links-blur" id="navlinksBlur"></div>
      <a href="#hem" class="active">Hem</a>
      <a href="#tjanster-wave">Tj√§nster</a>
      <a href="#franchise-wave">K√∂pa / S√§lja</a>
      <a href="#varfor">Varf√∂r oss</a>
      <a href="#contact">Kontakt</a>
    </div>

    <section id="hem">
      <canvas id="hero-dots"></canvas>
      <div class="landing-content">
        <h1>V√§lkommen till Advilia F√∂retagsm√§klare</h1>
        <h2>Din trygga partner vid k√∂p och f√∂rs√§ljning av f√∂retag</h2>
        <p>
          Med fokus p√• <span class="underline">v√§rde</span>,
          <span class="underline">trygghet</span> och
          <span class="underline">framg√•ng</span>
        </p>
        <a
          href="#bookConsultationHref"
          class="cta-button"
          id="bookConsultationBtn"
          ><i class="fas fa-paper-plane"></i> Boka en konsultation</a
        >
      </div>
    </section>

    <section id="tjanster-wave">
      <svg
        class="wave upside-down"
        viewBox="0 0 1440 320"
        preserveAspectRatio="none"
      >
        <defs>
          <linearGradient id="waveGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#ffffff" />
            <stop offset="100%" stop-color="#004358" />
          </linearGradient>
        </defs>
        <path
          fill="url(#waveGradient)"
          fill-opacity="0.8"
          d="M0,64L48,85.3C96,107,192,149,288,176C384,203,480,213,576,197.3C672,181,768,139,864,138.7C960,139,1056,181,1152,202.7C1248,224,1344,224,1392,224L1440,224L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"
        ></path>
      </svg>

      <div class="wave-content">
        <div class="serviceTitleBox">
          <h2 class="serviceTitle">V√•ra Tj√§nster & L√∂sningar</h2>
          <h3 class="serviceSubtitle">Din partner vid f√∂retagsaff√§rer</h3>
          <p class="serviceIntro">
            Vi erbjuder professionellt st√∂d genom hela processen ‚Äì fr√•n
            v√§rdering och analys till f√∂rhandling och √∂verl√•telse. Med oss f√•r
            du en trygg, diskret och effektiv aff√§r.
          </p>
        </div>
        <div class="services-grid">
          <div class="service-card">
            <div class="service-icon"><i class="fas fa-building"></i></div>
            <h3>F√∂retagsf√∂rs√§ljning</h3>
            <p>
              Vi hj√§lper dig genom hela processen n√§r du vill s√§lja ditt
              f√∂retag.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-handshake"></i></div>
            <h3>F√∂retagsk√∂p</h3>
            <p>Vi guidar dig vid f√∂retagsk√∂p och hittar r√§tt objekt f√∂r dig.</p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-balance-scale"></i></div>
            <h3>F√∂retagsv√§rdering</h3>
            <p>
              F√• en professionell v√§rdering som ger dig r√§tt beslutsunderlag.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-chart-line"></i></div>
            <h3>F√∂retagsanalys</h3>
            <p>
              Djupg√•ende analyser f√∂r att f√∂rst√• ditt f√∂retags styrkor och
              svagheter.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-lightbulb"></i></div>
            <h3>R√•dgivning & Strategi</h3>
            <p>
              Vi erbjuder personlig r√•dgivning och strategisk v√§gledning f√∂r att
              du ska fatta r√§tt beslut inf√∂r, under och efter aff√§ren.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-user-shield"></i></div>
            <h3>Diskretion & Sekretess</h3>
            <p>
              All hantering sker under strikt sekretess och med h√∂gsta
              diskretion.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-users"></i></div>
            <h3>Identifikation av k√∂pare</h3>
            <p>Vi hittar r√§tt k√∂pare och matchar ihop med r√§tt s√§ljare.</p>
          </div>

          <div class="service-card">
            <div class="service-icon">
              <i class="fas fa-hand-holding-usd"></i>
            </div>
            <h3>Finansiering</h3>
            <p>
              Vi bitr√§der vid finansiering och ger rekommendationer f√∂r b√§sta
              l√∂sning.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon">
              <i class="fas fa-file-signature"></i>
            </div>
            <h3>√ñverl√•telseavtal</h3>
            <p>Vi uppr√§ttar och slutf√∂r √∂verl√•telseavtal tryggt och korrekt.</p>
          </div>
        </div>

        <div class="serviceTitleBox">
          <h3 class="serviceSubtitle">Vi √§r redo att hj√§lpa dig</h3>
          <p class="serviceIntro">
            H√∂r av dig till oss s√• ber√§ttar vi mer om hur v√•ra f√∂retagsm√§klare
            kan hj√§lpa just dig!
          </p>
        </div>

        <div class="services-grid">
          <div class="service-card">
            <div class="service-icon"><i class="fas fa-store"></i></div>
            <h3>K√∂pa & S√§lja</h3>
            <p>
              Vi hj√§lper dig snabbt hitta r√§tt k√∂pare eller s√§ljare n√§r nya
              objekt blir tillg√§ngliga.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-calculator"></i></div>
            <h3>V√§rdera</h3>
            <p>
              En f√∂retagsv√§rdering √§r viktigt vid f√∂rs√§ljning, k√∂p eller
              investering. Vi ger dig r√§tt v√§rdeunderlag.
            </p>
          </div>

          <div class="service-card">
            <div class="service-icon"><i class="fas fa-chart-pie"></i></div>
            <h3>Investera</h3>
            <p>
              V√•ra investerare bidrar med b√•de kapital och aff√§rskompetens f√∂r
              att skapa l√•ngsiktigt v√§rde.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="franchise-wave">
      <div class="franchise-bg">
        <svg viewBox="0 0 1440 320" preserveAspectRatio="none">
          <defs>
            <linearGradient
              id="franchiseGradient"
              x1="0%"
              y1="0%"
              x2="100%"
              y2="100%"
            >
              <stop offset="0%" stop-color="#ffffff" />
              <stop offset="100%" stop-color="#004358" />
            </linearGradient>
          </defs>
          <path
            fill="url(#franchiseGradient)"
            d="M0,160 
       C360,0 1080,0 1440,160 
       C1080,320 360,320 0,160 
       Z"
          ></path>
        </svg>
      </div>

      <div class="wave-container">
        <div class="franchise-content">
          <h2 class="franchiseTitle">K√∂pa / S√§lja</h2>
          <p class="franchiseSubtitle">
            H√§r hittar du aktuella verksamheter som kan f√∂rv√§rvas. Kontakta oss
            f√∂r mer information.
          </p>

          <div class="franchise-grid" id="franchiseGrid"></div>
        </div>
      </div>
    </section>

    <section id="varfor">
      <div class="varfor-bg">
        <svg
          viewBox="0 0 1440 320"
          preserveAspectRatio="none"
          width="100%"
          height="100%"
        >
          <defs>
            <linearGradient
              id="varforGradient"
              x1="0%"
              y1="0%"
              x2="100%"
              y2="100%"
            >
              <stop offset="0%" stop-color="rgba(183,183,183,0.6)" />
              <stop offset="100%" stop-color="rgba(160,160,160,0.8)" />
            </linearGradient>
          </defs>
          <path
            fill="url(#franchiseGradient)"
            d="M0,200
            C360,0 1080,0 1440,200
            L1440,320
            L0,320
            Z"
          />
        </svg>
      </div>

      <div class="varfor-content">
        <h1>Varf√∂r arbeta med oss</h1>

        <div class="serviceTitleBox">
          <h3 class="serviceSubtitle">V√•rt innovativa tillv√§gag√•ngss√§tt</h3>
          <p class="serviceIntro">
            Vi str√§var st√§ndigt efter att skapa unika strategier som framh√§ver
            v√•ra kunders aff√§rsf√∂rdelar. Genom att kombinera expertis och
            kreativitet utvecklar vi skr√§ddarsydda l√∂sningar med l√•ngsiktiga
            resultat.
          </p>
        </div>

        <div class="varfor-cards">
          <div class="varfor-card">
            <h2>Erfarenhet & Analys</h2>
            <p>
              V√•rt team har √∂ver 20 √•rs erfarenhet inom ekonomi. Vi analyserar
              f√∂retag noggrant f√∂r att s√§kerst√§lla att du g√∂r r√§tt k√∂p och
              s√§ljer till r√§tt pris.
            </p>
          </div>
          <div class="varfor-card">
            <h2>Professionell Hj√§lp</h2>
            <p>
              Vi erbjuder professionell och dedikerad hj√§lp f√∂r att s√§kerst√§lla
              trygga och framg√•ngsrika aff√§rer.
            </p>
          </div>

          <div class="varfor-card">
            <h2>Effektiva l√∂sningar</h2>
            <p>
              Vi levererar effektiva och resultatdrivna l√∂sningar som optimerar
              era aff√§rsprocesser.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="contact-container">
        <div class="contact-intro">
          <h1>Kontakta Oss</h1>
          <span id="bookConsultationHref"></span>
          <p class="contact-info-intro">
            V√§lkommen till v√•rt kontor i hj√§rtat av Lund. H√§r m√∂ter vi g√§rna
            b√•de nya och befintliga kunder f√∂r r√•dgivning och samtal.
          </p>
        </div>
        <div class="map-address">
          <div class="contact-info">
            <h2>Bes√∂k Oss</h2>

            <img src="./Assets/pp.jpeg" alt="photo" class="contact-image" />
            <p class="vd-text">Baran √úcpinar VD</p>

            <div class="contact-item">
              <i class="fas fa-map-marker-alt"></i>
              <div>
                <a
                  href="https://maps.app.goo.gl/oNB1shv5HwKjcMu1A"
                  target="_blank"
                >
                  Advilia F√∂retagsm√§klare AB <br />
                  Traktorv√§gen 6 C <br />
                  22660 Lund, Sweden
                </a>
              </div>
            </div>

            <div class="contact-item">
              <i class="fas fa-phone"></i>
              <div>
                <a href="tel:0046703924320">+46 (703) 92 43 20</a>
              </div>
            </div>

            <div class="contact-item">
              <i class="fas fa-envelope"></i>
              <div>
                <a href="mailto:baran@advilia.se"> baran@advilia.se </a>
              </div>
            </div>

            <button id="openFormBtn" class="contact-btn">
              <i class="fas fa-paper-plane"></i> Skriv oss
            </button>
          </div>

          <iframe
            id="map"
            src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d17979.024365570283!2d13.161865!3d55.717182!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4653bd771184d2d1%3A0x76237ece9df74c4a!2sTraktorv%C3%A4gen%206c%2C%20226%2060%20Lund%2C%20Sverige!5e0!3m2!1ssv!2sus!4v1757360713065!5m2!1ssv!2sus"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
          <div id="contactModal" class="modal">
            <span class="close-btn">&times;</span>
            <form
              action="https://formspree.io/f/xzzjzrob"
              method="POST"
              class="contact-form"
              id="contactForm"
            >
              <p>
                Fyll i formul√§ret nedan s√• √•terkommer vi till dig s√• snart som
                m√∂jligt. Vi svarar vanligtvis inom 24 timmar.
              </p>
              <div class="form-group">
                <input type="text" name="name" required />
                <label>üë§ Namn</label>
              </div>
              <div class="form-group">
                <input type="email" name="email" required />
                <label>üìß E-post</label>
              </div>
              <div class="form-group">
                <input type="text" name="subject" required />
                <label>üìù √Ñmne</label>
              </div>
              <div class="form-group">
                <textarea rows="5" name="message" required></textarea>
                <label>üí¨ Meddelande</label>
              </div>
              <button type="submit" id="submitFormBtn">
                Skicka Meddelande
              </button>
            </form>
          </div>

          <div class="notification hide">
            <span class="notification-icon" id="statusIcon">‚úÖ</span>
            <p id="formStatus">Email har skickats framg√•ngsrikt!</p>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-container">
        <div class="footer-about">
          <h3>Advilia F√∂retagsm√§klare AB</h3>
          <div class="footer-about-content">
            <img src="./Assets/medlemsfr.png" />
            <p>
              Certifierad F√∂retagsm√§klare <br />
              Aukt. redovisningskonsult
            </p>
          </div>
        </div>

        <div class="footer-social">
          <h4>F√∂lj oss</h4>
          <div class="social-links">
            <a
              href="https://facebook.com/adviliaforetag"
              target="_blank"
              aria-label="Facebook"
              class="social-icon"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M22.676 0H1.324C.593 0 0 .593 0 1.324v21.352C0 23.407.593 24 1.324 24H12v-9.294H9.294V11.53H12V9.067c0-2.676 1.634-4.133 4.022-4.133 1.143 0 2.127.085 2.413.123v2.797h-1.655c-1.299 0-1.551.617-1.551 1.522v1.996h3.102l-.404 3.176H15.229V24h7.447c.73 0 1.324-.593 1.324-1.324V1.324C24 .593 23.407 0 22.676 0z"
                />
              </svg>
            </a>
            <a
              href="https://linkedin.com/company/adviliaforetagsmaklare"
              target="_blank"
              aria-label="LinkedIn"
              class="social-icon"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M22.23 0H1.77C.792 0 0 .774 0 1.728v20.544C0 23.226.792 24 1.77 24h20.46C23.208 24 24 23.226 24 22.272V1.728C24 .774 23.208 0 22.23 0zM7.12 20.452H3.558V9h3.562v11.452zM5.34 7.663a2.07 2.07 0 110-4.14 2.07 2.07 0 010 4.14zM20.452 20.452h-3.562v-5.6c0-1.336-.026-3.057-1.863-3.057-1.864 0-2.15 1.46-2.15 2.967v5.69h-3.562V9h3.421v1.561h.05c.476-.9 1.637-1.847 3.37-1.847 3.6 0 4.265 2.369 4.265 5.452v6.786z"
                />
              </svg>
            </a>
          </div>
        </div>

        <div class="footer-contact">
          <h4>Hitta oss</h4>
          <p>
            <a href="https://maps.app.goo.gl/oNB1shv5HwKjcMu1A" target="_blank">
              üìç Traktorv√§gen 6 C, 22660 Lund</a
            >
          </p>
          <p>
            <a href="tel:0046703924320">‚òéÔ∏è +46 (703) 92 43 20</a>
          </p>
          <p>
            <a href="mailto:baran@advilia.se"> ‚úâÔ∏è baran@advilia.se </a>
          </p>
        </div>
      </div>

      <div class="footer-bottom">
        <a href="https://mehmetkaantaspunar.se" target="_blank">
          &copy; <span id="currentYear"></span> Full Pack AB - MKaan || All
          rights reserved.
        </a>
      </div>
    </footer>

    <div id="cookie-banner" class="cookie-banner">
      <div class="cookie-content">
        <p>
          We use essential cookies to make our site work. With your consent, we
          may also use non-essential cookies to improve user experience and
          analyze website traffic. By clicking ‚ÄúAccept,‚Äù you agree to our
          website's cookie use as described in our Cookie Policy. You can change
          your cookie settings at any time by clicking ‚ÄúPreferences.‚Äù
        </p>
        <div class="cookie-buttons">
          <button id="cookie-preferences" class="cookie-btn cookie-preferences">
            Preferences
          </button>
          <button id="cookie-decline" class="cookie-btn cookie-decline">
            Decline
          </button>
          <button id="cookie-accept" class="cookie-btn cookie-accept">
            Accept
          </button>
        </div>
      </div>
    </div>
  </body>
  <script>
    const root = "https://mehmet-kaan.github.io/advilia-foretagmaklare";

    //Properties items generation
    function renderFranchises() {
      const grid = document.getElementById("franchiseGrid");
      fetch(`${root}/properties.json`)
        .then((response) => response.json())
        .then((properties) => {
          properties.forEach((item) => {
            const card = document.createElement("div");
            card.className = "franchise-card franchise-box";

            const img = document.createElement("img");
            img.src = item.image;
            img.alt = item.alt;
            img.className = "franchise-image";

            const info = document.createElement("div");
            info.className = "franchise-info";

            const button = document.createElement("button");
            button.className = "accordion-toggle";

            const title = document.createElement("h3");
            title.textContent = item.title;

            const accordionItem = document.createElement("div");
            accordionItem.className = "accordion-item";

            if (item.price)
              accordionItem.innerHTML += `<span class="accordion-price"><strong>Pris:</strong> ${item.price}</span><br/>`;
            if (item.place)
              accordionItem.innerHTML += `<span class="accordion-place"><strong>Plats:</strong> ${item.place}</span><br/>`;
            if (item.hyra)
              accordionItem.innerHTML += `<span class="accordion-place"><strong>Hyra:</strong> ${item.hyra}</span><br/>`;
            if (item.omsattning)
              accordionItem.innerHTML += `<span class="accordion-place"><strong>Oms√§ttning:</strong> ${item.omsattning}</span><br/>`;
            if (item.spelintakter)
              accordionItem.innerHTML += `<span class="accordion-place"><strong>Spelint√§kter:</strong> ${item.spelintakter}</span><br/>`;
            if (item.paketintakter)
              accordionItem.innerHTML += `<span class="accordion-place"><strong>Paketint√§kter:</strong> ${item.paketintakter}</span><br/>`;

            accordionItem.innerHTML += `<span class="accordion-icon">&#9662;</span>`;

            button.appendChild(title);
            button.appendChild(accordionItem);

            const content = document.createElement("div");
            content.className = "accordion-content";

            const ul = document.createElement("ul");
            item.details.forEach((d) => {
              const li = document.createElement("li");
              li.textContent = d;
              ul.appendChild(li);
            });

            const desc = document.createElement("p");
            desc.textContent = item.description;

            const link = document.createElement("a");
            link.href = item.contact;
            link.className = "cta-button convertedBtn";
            link.textContent = "Intresserad? Kontakta oss";

            content.appendChild(ul);
            content.appendChild(desc);
            content.appendChild(link);

            info.appendChild(button);
            info.appendChild(content);
            card.appendChild(img);
            card.appendChild(info);
            grid.appendChild(card);
          });

          addScrollAnimation(".franchise-box");
          setupAccordion();
        })
        .catch((err) => console.error("Error loading properties.json:", err));
    }

    renderFranchises();

    // Accordion functionality
    function setupAccordion() {
      document.querySelectorAll(".accordion-toggle").forEach((btn) => {
        btn.addEventListener("click", () => {
          const content = btn.nextElementSibling;
          btn.classList.toggle("active");
          content.classList.toggle("open");

          const card = btn.closest(".franchise-card");
          if (card) {
            card.classList.toggle("active");
          }
        });
      });
    }

    // Change navbar background on scroll
    const navbar = document.querySelector("nav");
    const navLinksContainer = document.getElementById("navLinksMobile");
    const navLinksBlur = document.getElementById("navlinksBlur");

    function updateNavbarOnScroll() {
      if (window.scrollY > 50) {
        navbar.classList.add("scrolled");
        navLinksContainer.classList.add("roundyCorner");
        navLinksBlur.classList.add("roundyCorner");
      } else {
        navbar.classList.remove("scrolled");
        navLinksContainer.classList.remove("roundyCorner");
        navLinksBlur.classList.remove("roundyCorner");
      }
    }

    // Run once when the page loads
    document.addEventListener("DOMContentLoaded", updateNavbarOnScroll);

    // Run every time the user scrolls
    window.addEventListener("scroll", updateNavbarOnScroll);

    // Get all section IDs and navbar links
    const sections = document.querySelectorAll("section");
    const navLinks = document.querySelectorAll(".nav-links a");
    const navLinksMobile = document.querySelectorAll(".nav-links-mobile a");

    const burger = document.getElementById("burger");

    window.addEventListener("scroll", () => {
      let currentSection = "";

      sections.forEach((section) => {
        const sectionTop = section.offsetTop - 70;
        if (scrollY >= sectionTop) {
          currentSection = section.getAttribute("id");
        }
      });

      navLinks.forEach((link) => {
        link.classList.remove("active");
        if (link.getAttribute("href") === `#${currentSection}`) {
          link.classList.add("active");
        }
      });

      navLinksMobile.forEach((link) => {
        link.classList.remove("active");
        if (link.getAttribute("href") === `#${currentSection}`) {
          link.classList.add("active");
        }
      });
    });

    burger.addEventListener("click", () => {
      burger.classList.toggle("active");
      navLinksContainer.classList.toggle("show");
    });

    navLinksContainer.addEventListener("click", () => {
      burger.classList.remove("active");
      navLinksContainer.classList.remove("show");
    });

    // Particle animation for hero section
    const canvas = document.getElementById("hero-dots");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    // Generate particles
    const particles = [];
    const colors = ["#e0f2fe", "#90cdf4", "#3b82f6", "#1e40af"];
    const maxParticles = 30;

    for (let i = 0; i < maxParticles; i++) {
      particles.push({
        x: Math.random() * 50, // start from top-left corner
        y: Math.random() * 50,
        radius: Math.random() * 6 + 3,
        speedX: Math.random() * 1 + 0.5,
        speedY: Math.random() * 1 + 0.5,
        alpha: Math.random() * 0.5 + 0.3,
      });
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      particles.forEach((p) => {
        const gradient = ctx.createRadialGradient(
          p.x,
          p.y,
          0,
          p.x,
          p.y,
          p.radius
        );
        gradient.addColorStop(0, "#e0f2fe"); // edge color
        gradient.addColorStop(1, "#3b82f6"); // center color
        // gradient.addColorStop(1, "#95662c");

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = gradient;
        ctx.globalAlpha = p.alpha;
        ctx.shadowBlur = 10;
        ctx.shadowColor = "#3b82f6";
        ctx.fill();

        p.x += p.speedX;
        p.y += p.speedY;

        // Reset when offscreen
        if (p.x > canvas.width || p.y > canvas.height) {
          p.x = Math.random() * 50;
          p.y = Math.random() * 50;
          p.radius = Math.random() * 6 + 3;
          p.speedX = Math.random() * 1 + 0.5;
          p.speedY = Math.random() * 1 + 0.5;
          p.alpha = Math.random() * 0.5 + 0.3;
        }
      });

      requestAnimationFrame(animate);
    }

    animate();

    function addScrollAnimation(selector) {
      const boxes = document.querySelectorAll(selector);

      const observer = new IntersectionObserver(
        (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("animate");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.3 }
      );

      boxes.forEach((box) => observer.observe(box));
    }

    addScrollAnimation(".franchise-box");
    addScrollAnimation(".service-card");
    addScrollAnimation(".varfor-card");

    // Modal functionality
    const modal = document.getElementById("contactModal");
    const bookConsultationBtn = document.getElementById("bookConsultationBtn");
    const openBtn = document.getElementById("openFormBtn");
    const closeBtn = document.querySelector(".close-btn");

    bookConsultationBtn.addEventListener("click", () => {
      modal.style.display = "block";
      setTimeout(() => modal.classList.add("show"), 500);
    });
    openBtn.addEventListener("click", () => {
      modal.style.display = "block";
      setTimeout(() => modal.classList.add("show"), 10);
    });

    closeBtn.addEventListener("click", () => {
      modal.classList.remove("show");
      setTimeout(() => (modal.style.display = "none"), 400);
    });

    window.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.classList.remove("show");
        setTimeout(() => (modal.style.display = "none"), 400);
      }
    });

    // Form submission handling
    const form = document.getElementById("contactForm");
    const status = document.getElementById("formStatus");
    const statusIcon = document.getElementById("statusIcon");
    const notificationBox = document.querySelector(".notification");
    const submitFormBtn = document.getElementById("submitFormBtn");

    form.addEventListener("submit", async function (event) {
      event.preventDefault();

      const data = new FormData(form);

      // Reset UI states
      notificationBox.classList.add("hide");
      status.style.display = "none";
      statusIcon.style.display = "none";
      status.textContent = "";

      submitFormBtn.disabled = true;
      submitFormBtn.innerHTML = `<span class="loader"></span> Skickar`;

      try {
        const response = await fetch(form.action, {
          method: form.method,
          body: data,
          headers: { Accept: "application/json" },
        });

        // Show status box
        notificationBox.classList.remove("hide");
        status.style.display = "block";
        statusIcon.style.display = "block";

        if (response.ok) {
          notificationBox.style.boxShadow = "0 3px 11px #2cf92c";
          statusIcon.textContent = "‚úÖ"; // big checkmark
          status.textContent = "Tack f√∂r ditt meddelande! Vi √•terkommer snart.";
          form.reset();
        } else {
          notificationBox.style.boxShadow = "0 3px 11px #950e0e";
          statusIcon.textContent = "‚ùå"; // error cross
          status.textContent = "N√•got gick fel. F√∂rs√∂k igen.";
        }
      } catch (error) {
        // Show error
        notificationBox.style.boxShadow = "0 3px 11px #ffc700";
        statusIcon.textContent = "‚ö†Ô∏è"; // warning icon
        status.textContent = "N√§tverksfel. Kontrollera din anslutning.";
      } finally {
        submitFormBtn.disabled = false;
        submitFormBtn.innerHTML = "Skicka Meddelande";
      }

      // Show notification box with animation
      notificationBox.classList.add("show");
      closeBtn.click();

      setTimeout(() => {
        notificationBox.classList.remove("show");
        setTimeout(() => {
          notificationBox.classList.add("hide");
        }, 1500);
      }, 1500);
    });

    // Set current year in footer
    const yearSpan = document.getElementById("currentYear");
    const currentYear = new Date().getFullYear();
    yearSpan.textContent = currentYear;

    // Cookie banner functionality
    document.addEventListener("DOMContentLoaded", () => {
      const banner = document.getElementById("cookie-banner");

      // Check if user already made a choice
      const cookieChoice = localStorage.getItem("cookie-consent");
      if (!cookieChoice) {
        banner.style.display = "block";
      }

      document.getElementById("cookie-accept").addEventListener("click", () => {
        localStorage.setItem("cookie-consent", "accepted");
        banner.style.display = "none";
      });

      document
        .getElementById("cookie-decline")
        .addEventListener("click", () => {
          localStorage.setItem("cookie-consent", "declined");
          banner.style.display = "none";
        });

      // document
      //   .getElementById("cookie-preferences")
      //   .addEventListener("click", () => {
      //     localStorage.setItem("cookie-consent", "preferences");
      //     banner.style.display = "none";
      //     alert("Preferences dialog would open here (not implemented yet).");
      //   });
    });
  </script>
</html>
